"use strict";(self.webpackChunkkamasutra=self.webpackChunkkamasutra||[]).push([[142],{7142:(s,t,e)=>{e.r(t),e.d(t,{default:()=>C});var a=e(5043),o=e(3216),i=e(3003);const r="Profile_content__-f+CG",u="ProfileInfo_avatar__qzcfL";var l=e(579);a.Component;const n=s=>{const[t,e]=(0,a.useState)(!1),[o,i]=(0,a.useState)(s.status);(0,a.useEffect)((()=>{i(s.status)}),[s.status]);return(0,l.jsxs)("div",{children:[!t&&(0,l.jsx)("div",{children:(0,l.jsx)("span",{onDoubleClick:()=>{e(!0)},children:o||"----"})}),t&&(0,l.jsx)("div",{children:(0,l.jsx)("input",{onChange:s=>{i(s.currentTarget.value)},autoFocus:!0,onBlur:()=>{e(!1),s.updateStatus(o)},value:o})})]})},d=s=>s.profile?(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:u,children:s.profile.photos&&s.profile.photos.large&&(0,l.jsx)("img",{src:s.profile.photos.large,alt:""})}),(0,l.jsx)(n,{status:s.status,updateStatus:s.updateStatus})]}):(0,l.jsx)("div",{children:"Loading..."});var p=e(7301);const c="Post_item__WVAfb",x=s=>(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:c,children:(0,l.jsx)("img",{src:"https://sun6-20.userapi.com/s/v1/if1/IFjPpkEm081-xeNkBHWhVs9HnmtmBLxh0yB3MpmvuhroVCBPJ5w8aaMXKi7-ooVywyjoIuCE.jpg?size=900x900&quality=96&crop=0,0,900,900&ava=1",alt:"",srcset:""})}),(0,l.jsx)("div",{children:s.message}),(0,l.jsxs)("div",{children:["like:  ",s.likesCount]})]});var h=e(5963),f=e(3842),j=e(5010),v=e(7597);const m=a.memo((s=>{let t=s.postsData.map((s=>(0,l.jsx)(x,{message:s.message,likesCount:s.likesCount})));return(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{children:"My posts"}),(0,l.jsx)(P,{onSubmit:t=>{s.addPost(t.newPostText)},newPostText:s.newPostText}),(0,l.jsx)("div",{children:t})]})})),P=(0,f.A)({form:"ProfileAddNewPostForm"})((s=>(0,l.jsxs)("form",{onSubmit:s.handleSubmit,children:[(0,l.jsx)("div",{children:(0,l.jsx)(h.A,{component:v.T,name:"newPostText",value:s.newPostText,validate:[j.Q,(0,j.d)(10)]})}),(0,l.jsx)("div",{children:(0,l.jsx)("button",{children:"Send"})})]}))),g=m,S=(0,i.Ng)((s=>({postsData:s.profilePage.postsData,newPostText:s.profilePage.newPostText})),(s=>({addPost:t=>{s((0,p.oL)(t))}})))(g),w=s=>(0,l.jsxs)("div",{className:r,children:[(0,l.jsx)(d,{profile:s.profile,status:s.status,updateStatus:s.updateStatus}),(0,l.jsx)(S,{store:s.store})]});let k=(0,e(3757).A)((s=>{let{id:t}=(0,o.g)();return t||(t=s.autherizedUserId,t||s.history.push("/login")),(0,a.useEffect)((()=>{s.getUserProfile(t)}),[t]),(0,a.useEffect)((()=>{s.getStatus(t)}),[]),(0,l.jsx)("div",{children:(0,l.jsx)(w,{profile:s.profile,status:s.status,updateStatus:s.updateStatus})})}));const C=(0,i.Ng)((s=>({profile:s.profilePage.profile,postsData:s.profilePage.postsData,newPostText:s.profilePage.newPostText,status:s.profilePage.status,autherizedUserId:s.auth.userId,isAuth:s.auth.isAuth})),{getUserProfile:p.VM,getStatus:p.BS,updateStatus:p.yB})(k)}}]);
//# sourceMappingURL=142.ec325170.chunk.js.map